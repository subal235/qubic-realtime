version: '3.8'

services:
  turboauth:
    build:
      context: ../services/turboauth/backend
      dockerfile: Dockerfile
      target: builder # Stop at builder stage for hot reload
    container_name: realtime-turboauth-dev
    ports:
      - "8080:8080"
      - "9090:9090"
      - "2112:2112"
    volumes:
      - ../services/turboauth/backend:/app # Mount source for hot reload
    environment:
      - ENV=development
      - LOG_LEVEL=debug
      - LOG_FORMAT=pretty
    command: go run ./cmd/api
    networks:
      - realtime-net

  redis:
    ports:
      - "6379:6379"
